<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <title>Survey</title>
</head>

<body>

    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1 class="text-center">FriendFinder Survey</h1>
            <p class="text-center">Take our short survey and see who you're most compatible friend is!</p>
        </div>
    </div>
    <form>
        <div class="form-group">
            <label for="firstName">First Name</label>
            <input type="text" class="form-control" id="firstName">
        </div>
        <div class="form-group">
            <label for="lastName">Last Name</label>
            <input type="text" class="form-control" id="lastName">
        </div>
        <!-- <div class="form-group">
            <label for="email">Email</label>
            <input type="email" class="form-control" id="email">
        </div> -->
        <div class="form-group">
            <label for="photo">Photo URL</label>
            <input type="url" class="form-control" id="photoURL">
        </div>
        <p>
            <a class="btn btn-primary" data-toggle="collapse" href="#collapseExample" role="button"
                aria-expanded="false" aria-controls="collapseExample">
                Survey Questions
            </a>
        </p>
        <div class="collapse" id="collapseExample">
            <div class="card card-body" id="q1">
                Question 1 - I prefer a text over a phone call?
                <br>
                <form action="">
                    <ul class='likert'>
                        <li>
                            <input type="radio" name="q1" value="5">
                            <label>Strongly agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q1" value="4">
                            <label>Agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q1" value="3">
                            <label>Neutral</label>
                        </li>
                        <li>
                            <input type="radio" name="q1" value="2">
                            <label>Disagree</label>
                        </li>
                        <li>
                            <input type="radio" name="q1" value="1">
                            <label>Strongly Disagree</label>
                </form>
            </div>
            <br>
            <div class="card card-body" id="q2">
                Question 2 - One must always pre-wash dishes before loading them into the dishwasher.
                <br>
                <form action="">
                    <ul class='likert'>
                        <li>
                            <input type="radio" name="q2" value="5">
                            <label>Strongly agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q2" value="4">
                            <label>Agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q2" value="3">
                            <label>Neutral</label>
                        </li>
                        <li>
                            <input type="radio" name="q2" value="2">
                            <label>Disagree</label>
                        </li>
                        <li>
                            <input type="radio" name="q2" value="1">
                            <label>Strongly Disagree</label>
                </form>
            </div>
            <br>
            <div class="card card-body" id="q3">
                Question 3 - One must always wash or rinse meat before cooking it.
                <form action="">
                    <ul class='likert'>
                        <li>
                            <input type="radio" name="q3" value="5">
                            <label>Strongly agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q3" value="4">
                            <label>Agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q3" value="3">
                            <label>Neutral</label>
                        </li>
                        <li>
                            <input type="radio" name="q3" value="2">
                            <label>Disagree</label>
                        </li>
                        <li>
                            <input type="radio" name="q3" value="1">
                            <label>Strongly Disagree</label>
                </form>
            </div>
            <br>
            <div class="card card-body" id="q4">
                Question 4 - The toilet seat must always remain down when not in use.
                <form action="">
                    <ul class='likert'>
                        <li>
                            <input type="radio" name="q4" value="5">
                            <label>Strongly agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q4" value="4">
                            <label>Agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q4" value="3">
                            <label>Neutral</label>
                        </li>
                        <li>
                            <input type="radio" name="q4" value="2">
                            <label>Disagree</label>
                        </li>
                        <li>
                            <input type="radio" name="q4" value="1">
                            <label>Strongly Disagree</label>
                </form>
            </div>
            <br>
            <div class="card card-body" id="q5">
                Question 5 - I know ALL the lyrics to "Ice Ice Baby"
                <form action="">
                    <ul class='likert'>
                        <li>
                            <input type="radio" name="q5" value="5">
                            <label>Strongly agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q5" value="4">
                            <label>Agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q5" value="3">
                            <label>Neutral</label>
                        </li>
                        <li>
                            <input type="radio" name="q5" value="2">
                            <label>Disagree</label>
                        </li>
                        <li>
                            <input type="radio" name="q5" value="1">
                            <label>Strongly Disagree</label>
                </form>
            </div>
            <br>
            <div class="card card-body" id="q6">
                Question 6 - Milli Vanilli should have continued to tour after they were discovered to only be lip
                syncing.
                <form action="">
                    <ul class='likert'>
                        <li>
                            <input type="radio" name="q6" value="5">
                            <label>Strongly agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q6" value="4">
                            <label>Agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q6" value="3">
                            <label>Neutral</label>
                        </li>
                        <li>
                            <input type="radio" name="q6" value="2">
                            <label>Disagree</label>
                        </li>
                        <li>
                            <input type="radio" name="q6" value="1">
                            <label>Strongly Disagree</label>
                </form>
            </div>
            <br>
            <div class="card card-body" id="q7">
                Question 7 - I prefer dogs over cats.
                <form action="">
                    <ul class='likert'>
                        <li>
                            <input type="radio" name="q7" value="5">
                            <label>Strongly agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q7" value="4">
                            <label>Agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q7" value="3">
                            <label>Neutral</label>
                        </li>
                        <li>
                            <input type="radio" name="q7" value="2">
                            <label>Disagree</label>
                        </li>
                        <li>
                            <input type="radio" name="q7" value="1">
                            <label>Strongly Disagree</label>
                </form>
            </div>
            <br>
            <div class="card card-body" id="q8">
                Question 8 - I prefer the beach over the mountains.
                <form action="">
                    <ul class='likert'>
                        <li>
                            <input type="radio" name="q8" value="5">
                            <label>Strongly agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q8" value="4">
                            <label>Agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q8" value="3">
                            <label>Neutral</label>
                        </li>
                        <li>
                            <input type="radio" name="q8" value="2">
                            <label>Disagree</label>
                        </li>
                        <li>
                            <input type="radio" name="q8" value="1">
                            <label>Strongly Disagree</label>
                </form>
            </div>
            <br>
            <div class="card card-body" id="q9">
                Question 9 - The 80's were better than the 90's.
                <form action="">
                    <ul class='likert'>
                        <li>
                            <input type="radio" name="q9" value="5">
                            <label>Strongly agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q9" value="4">
                            <label>Agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q9" value="3">
                            <label>Neutral</label>
                        </li>
                        <li>
                            <input type="radio" name="q9" value="2">
                            <label>Disagree</label>
                        </li>
                        <li>
                            <input type="radio" name="q9" value="1">
                            <label>Strongly Disagree</label>
                </form>
            </div>
            <br>
            <div class="card card-body" id="q10">
                Question 10 - I love bacon!
                <form action="">
                    <ul class='likert'>
                        <li>
                            <input type="radio" name="q10" value="5">
                            <label>Strongly agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q10" value="4">
                            <label>Agree</label>
                        </li>
                        <li>
                            <input type="radio" name="q10" value="3">
                            <label>Neutral</label>
                        </li>
                        <li>
                            <input type="radio" name="q10" value="2">
                            <label>Disagree</label>
                        </li>
                        <li>
                            <input type="radio" name="q10" value="1">
                            <label>Strongly Disagree</label>
                </form>
            </div>
            <br>
            <button type="submit" class="btn btn-primary submit">Submit</button>
            <br>
            <br>
            <br>
        </div>

    </form>

    <footer class="footer">
        <div class="container">
            <p>
                <a href="/api/friends">API Table Link</a> |
        </div>
    </footer>

    <div class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Your Match</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <!-- Empty the data -->
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- <p>This is a test</p>
                    <p id="lastName"></p>
                    <img id="photoURL"> -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <!-- Empty the data -->
                </div>
            </div>
        </div>
    </div>


    <!-- jQuery first, then Popper.js, then Bootstrap JS -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>


</html>

<script type="text/javascript">
    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file

    $(".submit").on("click", function (event) {
        event.preventDefault();
        console.log("Clicked");

        // Here we grab the form elements
        var newFriend = {
            firstName: $("#firstName").val().trim(),
            lastName: $("#lastName").val().trim(),
            photo: $("#photoURL").val().trim(),
            scores: [
                $('input[type=radio][name=q1]:checked').attr('value'),
                $('input[type=radio][name=q2]:checked').attr('value'),
                $('input[type=radio][name=q3]:checked').attr('value'),
                $('input[type=radio][name=q4]:checked').attr('value'),
                $('input[type=radio][name=q5]:checked').attr('value'),
                $('input[type=radio][name=q6]:checked').attr('value'),
                $('input[type=radio][name=q7]:checked').attr('value'),
                $('input[type=radio][name=q8]:checked').attr('value'),
                $('input[type=radio][name=q9]:checked').attr('value'),
                $('input[type=radio][name=q10]:checked').attr('value'),


            ]

        };

        console.log(newFriend);

        $.post("/api/friends", newFriend,
            function (data) {
                console.log(data);
                // $("#lastName").text(data.lastName);
                // $("#photoURL").attr("src",data.photo);
                $(".modal-body").append(`
                    <p id="firstName">${data.firstName}</p>
                    <p id="lastName">${data.lastName}</p>
                    <img id="photoURL" src="${data.photoURL}" width="200">

                    `)
                $('.modal').modal('show');
                var userData = {
                    scores: [
                        $("#q1").val(""),
                        $("#q2").val(""),
                        $("#q3").val(""),
                        $("#q4").val(""),
                        $("#q5").val(""),
                        $("#q6").val(""),
                        $("#q7").val(""),
                        $("#q8").val(""),
                        $("#q9").val(""),
                        $("#q10").val(""),
                    ]
                };

                // var currentURL = window.location.origin;

                // $.post(currentURL = "/api/friends", userData, function (data) {
                //     alert("working");
                // });
            }

        )

    });





</script>


<!-- //
<script type="text/javascript">
//     $(".submit").on("click", function () {
//         function validateForm() {
//             var isValid = true;
//             $(".form-control").each(function () {
//                 if ($(this).val() === "") {
//                     isValid = false;
//                 }
//             });

//             $(".likert").each(function () {
//                 if ($(this).val() === "") {
//                     isValid = false;
//                 }
//             });
//             return isValid;

//             if (validateForm()) {
//                 var userData = {
//                     firstName: $("#firstName").val(),
//                     lastName: $("#lastName").val(),
//                     photo: $("#photoURL").val(),
//                     scores: [
//                         $("#q1").val(),
//                         $("#q2").val(),
//                         $("#q3").val(),
//                         $("#q4").val(),
//                         $("#q5").val(),
//                         $("#q6").val(),
//                         $("#q7").val(),
//                         $("#q8").val(),
//                         $("#q9").val(),
//                         $("#q10").val(),
//                     ]
//                 };

//                 var currentURL = window.location.origin;

//                 $.post(currentURL = "/api/friends", userData, function (data) {
//                     alert("working");
//                 });
//             }


//         }
//     })

// </script> -->